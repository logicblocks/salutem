<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>salutem.core.checks documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Salutem</span> <span class="project-version">0.1.0-RC17</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>salutem</span></div></div></li><li class="depth-2"><a href="salutem.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-3 branch current"><a href="salutem.core.checks.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>checks</span></div></a></li><li class="depth-3 branch"><a href="salutem.core.maintenance.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>maintenance</span></div></a></li><li class="depth-3 branch"><a href="salutem.core.registry.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>registry</span></div></a></li><li class="depth-3 branch"><a href="salutem.core.results.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>results</span></div></a></li><li class="depth-3"><a href="salutem.core.time.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>time</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="salutem.core.checks.html#var-attempt"><div class="inner"><span>attempt</span></div></a></li><li class="depth-1"><a href="salutem.core.checks.html#var-background-check"><div class="inner"><span>background-check</span></div></a></li><li class="depth-1"><a href="salutem.core.checks.html#var-background.3F"><div class="inner"><span>background?</span></div></a></li><li class="depth-1"><a href="salutem.core.checks.html#var-evaluate"><div class="inner"><span>evaluate</span></div></a></li><li class="depth-1"><a href="salutem.core.checks.html#var-realtime-check"><div class="inner"><span>realtime-check</span></div></a></li><li class="depth-1"><a href="salutem.core.checks.html#var-realtime.3F"><div class="inner"><span>realtime?</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">salutem.core.checks</h1><div class="doc"><div class="markdown"><p>Provides constructors, predicates and evaluation functions for checks.</p></div></div><div class="public anchor" id="var-attempt"><h3>attempt</h3><div class="usage"><code>(attempt check context)</code><code>(attempt dependencies trigger-id check context result-channel)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/logicblocks/salutem/blob/0.1.0-RC17/core/src/salutem/core/checks.clj#L101">view source</a></div></div><div class="public anchor" id="var-background-check"><h3>background-check</h3><div class="usage"><code>(background-check check-name check-fn)</code><code>(background-check check-name check-fn opts)</code></div><div class="doc"><div class="markdown"><p>Constructs a background check with the provided name and check function.</p>
<p>A background check is one that is evaluated periodically with the result cached until the next evaluation, which will occur once the time-to-live (TTL) of the check has passed.</p>
<p>Background checks are useful for external dependencies where it is important not to perform the check too frequently and where the health status only needs to be accurate to within the TTL.</p>
<p>Takes the following parameters:</p>
<ul>
  <li><code>check-name</code>: a keyword representing the name of the check</li>
  <li><code>check-fn</code>: an arity-2 function, with with the first argument being a context map as provided during evaluation or at maintenance pipeline construction and the second argument being a callback function which should be called with the result fo the check to signal the check is complete; note, check functions <em>must</em> be non-blocking.</li>
  <li><code>opts</code>: an optional map of additional options for the check, containing:
    <ul>
      <li><code>:ttl</code>: a <a href="salutem.core.html#var-duration">duration</a> representing the TTL for a result of this check,  defaulting to 10 seconds</li>
      <li><code>:timeout</code>: a <a href="salutem.core.html#var-duration">duration</a> representing the amount of time to wait for  the check to complete before considering it failed, defaulting to  10 seconds</li>
    </ul>
  </li>
</ul></div></div><div class="src-link"><a href="https://github.com/logicblocks/salutem/blob/0.1.0-RC17/core/src/salutem/core/checks.clj#L26">view source</a></div></div><div class="public anchor" id="var-background.3F"><h3>background?</h3><div class="usage"><code>(background? check)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> if the provided check is a background check, <code>false</code> otherwise.</p></div></div><div class="src-link"><a href="https://github.com/logicblocks/salutem/blob/0.1.0-RC17/core/src/salutem/core/checks.clj#L89">view source</a></div></div><div class="public anchor" id="var-evaluate"><h3>evaluate</h3><div class="usage"><code>(evaluate check)</code><code>(evaluate check context)</code></div><div class="doc"><div class="markdown"><p>Evaluates the provided check synchronously, returning the result of the evaluation.</p>
<p>Optionally takes a context map containing arbitrary context required by the check in order to run and passed to the check function as the first argument.</p></div></div><div class="src-link"><a href="https://github.com/logicblocks/salutem/blob/0.1.0-RC17/core/src/salutem/core/checks.clj#L145">view source</a></div></div><div class="public anchor" id="var-realtime-check"><h3>realtime-check</h3><div class="usage"><code>(realtime-check check-name check-fn)</code><code>(realtime-check check-name check-fn opts)</code></div><div class="doc"><div class="markdown"><p>Constructs a realtime check with the provided name and check function.</p>
<p>A realtime check is one that is re-evaluated whenever the check is resolved, with no caching of results taking place.</p>
<p>Realtime checks are useful when the accuracy of the check needs to be very accurate or where the check itself is inexpensive.</p>
<p>Takes the following parameters:</p>
<ul>
  <li><code>check-name</code>: a keyword representing the name of the check</li>
  <li><code>check-fn</code>: an arity-2 function, with with the first argument being a context map as provided during evaluation or at maintenance pipeline construction and the second argument being a callback function which should be called with the result fo the check to signal the check is complete; note, check functions <em>must</em> be non-blocking.</li>
  <li><code>opts</code>: an optional map of additional options for the check, containing:
    <ul>
      <li><code>:timeout</code>: a <a href="salutem.core.html#var-duration">duration</a> representing the amount of time to wait for  the check to complete before considering it failed, defaulting to  10 seconds</li>
    </ul>
  </li>
</ul></div></div><div class="src-link"><a href="https://github.com/logicblocks/salutem/blob/0.1.0-RC17/core/src/salutem/core/checks.clj#L60">view source</a></div></div><div class="public anchor" id="var-realtime.3F"><h3>realtime?</h3><div class="usage"><code>(realtime? check)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> if the provided check is a realtime check, <code>false</code> otherwise.</p></div></div><div class="src-link"><a href="https://github.com/logicblocks/salutem/blob/0.1.0-RC17/core/src/salutem/core/checks.clj#L95">view source</a></div></div></div></body></html>